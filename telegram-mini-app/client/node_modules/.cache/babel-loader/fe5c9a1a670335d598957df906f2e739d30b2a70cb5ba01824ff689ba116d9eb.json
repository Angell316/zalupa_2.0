{"ast":null,"code":"/**\r\n * Утилиты для работы с Telegram WebApp API\r\n */\n\n// Проверяем, запущено ли приложение внутри Telegram\nexport const isRunningInTelegram = () => {\n  var _window$Telegram;\n  return Boolean((_window$Telegram = window.Telegram) === null || _window$Telegram === void 0 ? void 0 : _window$Telegram.WebApp);\n};\n\n// Получаем инстанс WebApp\nexport const getTelegramWebApp = () => {\n  if (!isRunningInTelegram()) {\n    console.warn('Приложение запущено вне Telegram.');\n    return null;\n  }\n  return window.Telegram.WebApp;\n};\n\n// Получаем данные пользователя\nexport const getTelegramUser = () => {\n  var _webApp$initDataUnsaf;\n  const webApp = getTelegramWebApp();\n  if (!webApp) return null;\n  return ((_webApp$initDataUnsaf = webApp.initDataUnsafe) === null || _webApp$initDataUnsaf === void 0 ? void 0 : _webApp$initDataUnsaf.user) || null;\n};\n\n// Получаем тему из Telegram\nexport const getTelegramTheme = () => {\n  const webApp = getTelegramWebApp();\n  if (!webApp) return null;\n  return webApp.themeParams;\n};\n\n// Показать всплывающее уведомление\nexport const showNotification = message => {\n  const webApp = getTelegramWebApp();\n  if (!webApp) return;\n  webApp.showPopup({\n    title: 'ECOSIM',\n    message,\n    buttons: [{\n      type: 'close'\n    }]\n  });\n};\n\n// Закрыть mini app\nexport const closeApp = () => {\n  const webApp = getTelegramWebApp();\n  if (!webApp) return;\n  webApp.close();\n};\n\n// Развернуть приложение на весь экран\nexport const expandApp = () => {\n  const webApp = getTelegramWebApp();\n  if (!webApp) return;\n  webApp.expand();\n};\n\n// Включить кнопку \"Назад\"\nexport const enableBackButton = callback => {\n  const webApp = getTelegramWebApp();\n  if (!webApp) return;\n  webApp.BackButton.show();\n  webApp.BackButton.onClick(callback);\n};\n\n// Выключить кнопку \"Назад\"\nexport const disableBackButton = () => {\n  const webApp = getTelegramWebApp();\n  if (!webApp) return;\n  webApp.BackButton.hide();\n};","map":{"version":3,"names":["isRunningInTelegram","_window$Telegram","Boolean","window","Telegram","WebApp","getTelegramWebApp","console","warn","getTelegramUser","_webApp$initDataUnsaf","webApp","initDataUnsafe","user","getTelegramTheme","themeParams","showNotification","message","showPopup","title","buttons","type","closeApp","close","expandApp","expand","enableBackButton","callback","BackButton","show","onClick","disableBackButton","hide"],"sources":["C:/Users/Reko/Desktop/chtoto/telegram-mini-app/client/src/utils/telegram.ts"],"sourcesContent":["/**\r\n * Утилиты для работы с Telegram WebApp API\r\n */\r\n\r\n// Проверяем, запущено ли приложение внутри Telegram\r\nexport const isRunningInTelegram = (): boolean => {\r\n  return Boolean(window.Telegram?.WebApp);\r\n};\r\n\r\n// Получаем инстанс WebApp\r\nexport const getTelegramWebApp = (): any => {\r\n  if (!isRunningInTelegram()) {\r\n    console.warn('Приложение запущено вне Telegram.');\r\n    return null;\r\n  }\r\n  \r\n  return window.Telegram.WebApp;\r\n};\r\n\r\n// Получаем данные пользователя\r\nexport const getTelegramUser = (): any => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return null;\r\n  \r\n  return webApp.initDataUnsafe?.user || null;\r\n};\r\n\r\n// Получаем тему из Telegram\r\nexport const getTelegramTheme = (): any => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return null;\r\n  \r\n  return webApp.themeParams;\r\n};\r\n\r\n// Показать всплывающее уведомление\r\nexport const showNotification = (message: string): void => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return;\r\n  \r\n  webApp.showPopup({\r\n    title: 'ECOSIM',\r\n    message,\r\n    buttons: [{ type: 'close' }]\r\n  });\r\n};\r\n\r\n// Закрыть mini app\r\nexport const closeApp = (): void => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return;\r\n  \r\n  webApp.close();\r\n};\r\n\r\n// Развернуть приложение на весь экран\r\nexport const expandApp = (): void => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return;\r\n  \r\n  webApp.expand();\r\n};\r\n\r\n// Включить кнопку \"Назад\"\r\nexport const enableBackButton = (callback: () => void): void => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return;\r\n  \r\n  webApp.BackButton.show();\r\n  webApp.BackButton.onClick(callback);\r\n};\r\n\r\n// Выключить кнопку \"Назад\"\r\nexport const disableBackButton = (): void => {\r\n  const webApp = getTelegramWebApp();\r\n  if (!webApp) return;\r\n  \r\n  webApp.BackButton.hide();\r\n}; "],"mappings":"AAAA;AACA;AACA;;AAEA;AACA,OAAO,MAAMA,mBAAmB,GAAGA,CAAA,KAAe;EAAA,IAAAC,gBAAA;EAChD,OAAOC,OAAO,EAAAD,gBAAA,GAACE,MAAM,CAACC,QAAQ,cAAAH,gBAAA,uBAAfA,gBAAA,CAAiBI,MAAM,CAAC;AACzC,CAAC;;AAED;AACA,OAAO,MAAMC,iBAAiB,GAAGA,CAAA,KAAW;EAC1C,IAAI,CAACN,mBAAmB,CAAC,CAAC,EAAE;IAC1BO,OAAO,CAACC,IAAI,CAAC,mCAAmC,CAAC;IACjD,OAAO,IAAI;EACb;EAEA,OAAOL,MAAM,CAACC,QAAQ,CAACC,MAAM;AAC/B,CAAC;;AAED;AACA,OAAO,MAAMI,eAAe,GAAGA,CAAA,KAAW;EAAA,IAAAC,qBAAA;EACxC,MAAMC,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE,OAAO,IAAI;EAExB,OAAO,EAAAD,qBAAA,GAAAC,MAAM,CAACC,cAAc,cAAAF,qBAAA,uBAArBA,qBAAA,CAAuBG,IAAI,KAAI,IAAI;AAC5C,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAGA,CAAA,KAAW;EACzC,MAAMH,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE,OAAO,IAAI;EAExB,OAAOA,MAAM,CAACI,WAAW;AAC3B,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAIC,OAAe,IAAW;EACzD,MAAMN,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE;EAEbA,MAAM,CAACO,SAAS,CAAC;IACfC,KAAK,EAAE,QAAQ;IACfF,OAAO;IACPG,OAAO,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC;EAC7B,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAY;EAClC,MAAMX,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE;EAEbA,MAAM,CAACY,KAAK,CAAC,CAAC;AAChB,CAAC;;AAED;AACA,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAY;EACnC,MAAMb,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE;EAEbA,MAAM,CAACc,MAAM,CAAC,CAAC;AACjB,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAIC,QAAoB,IAAW;EAC9D,MAAMhB,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE;EAEbA,MAAM,CAACiB,UAAU,CAACC,IAAI,CAAC,CAAC;EACxBlB,MAAM,CAACiB,UAAU,CAACE,OAAO,CAACH,QAAQ,CAAC;AACrC,CAAC;;AAED;AACA,OAAO,MAAMI,iBAAiB,GAAGA,CAAA,KAAY;EAC3C,MAAMpB,MAAM,GAAGL,iBAAiB,CAAC,CAAC;EAClC,IAAI,CAACK,MAAM,EAAE;EAEbA,MAAM,CAACiB,UAAU,CAACI,IAAI,CAAC,CAAC;AAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}